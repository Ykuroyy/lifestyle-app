const adviceDatabase = {
  health: {
    low: [
      'ðŸƒâ€â™€ï¸ é€±ã«3å›žã€15åˆ†ã®æ•£æ­©ã‹ã‚‰å§‹ã‚ã¦ã¿ã¾ã—ã‚‡ã†',
      'ðŸ’¤ ç¡çœ æ™‚é–“ã‚’30åˆ†å»¶ã°ã—ã¦ã¿ã¾ã›ã‚“ã‹ï¼Ÿ',
      'ðŸ¥— 1æ—¥1é£Ÿã‚’é‡Žèœä¸­å¿ƒã®ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã«å¤‰ãˆã¦ã¿ã¾ã—ã‚‡ã†',
      'ðŸ§˜â€â™€ï¸ 5åˆ†é–“ã®æ·±å‘¼å¸ã‚„ã‚¹ãƒˆãƒ¬ãƒƒãƒã‚’å–ã‚Šå…¥ã‚Œã¦ã¿ã¦ã¯ï¼Ÿ',
    ],
    medium: [
      'ðŸŽ¯ ç¾åœ¨ã®å¥åº·ç¿’æ…£ã‚’ç¶™ç¶šã—ã€å°‘ã—ãšã¤é‹å‹•é‡ã‚’å¢—ã‚„ã—ã¾ã—ã‚‡ã†',
      'ðŸ“± ã‚¹ãƒžãƒ¼ãƒˆã‚¦ã‚©ãƒƒãƒã§æ­©æ•°ã‚’è¨˜éŒ²ã—ã¦ãƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä¸Šã’ã¾ã—ã‚‡ã†',
      'ðŸ¥¤ æ°´åˆ†è£œçµ¦ã‚’æ„è­˜çš„ã«å¢—ã‚„ã—ã¦ã¿ã¦ãã ã•ã„',
    ],
    high: [
      'âœ¨ ç´ æ™´ã‚‰ã—ã„å¥åº·çŠ¶æ…‹ã§ã™ï¼ã“ã®èª¿å­ã‚’ç¶­æŒã—ã¾ã—ã‚‡ã†',
      'ðŸ‘¥ å‹äººã‚„å®¶æ—ã¨ä¸€ç·’ã«é‹å‹•ã™ã‚‹ã“ã¨ã§ã€æ›´ã«æ¥½ã—ãç¶šã‘ã‚‰ã‚Œã¾ã™',
    ],
  },
  work: {
    low: [
      'ðŸ“… ã‚¿ã‚¹ã‚¯ã‚’å„ªå…ˆé †ä½ã§æ•´ç†ã—ã€1æ—¥3ã¤ã®é‡è¦ãªã“ã¨ã«é›†ä¸­ã—ã¾ã—ã‚‡ã†',
      'â° ãƒãƒ¢ãƒ‰ãƒ¼ãƒ­ãƒ†ã‚¯ãƒ‹ãƒƒã‚¯ï¼ˆ25åˆ†é›†ä¸­ï¼‹5åˆ†ä¼‘æ†©ï¼‰ã‚’è©¦ã—ã¦ã¿ã¦ã¯ï¼Ÿ',
      'ðŸŽ¯ å°ã•ãªç›®æ¨™ã‚’è¨­å®šã—ã¦é”æˆæ„Ÿã‚’ç©ã¿é‡ã­ã¾ã—ã‚‡ã†',
      'ðŸ’¬ ä¸Šå¸ã‚„åŒåƒšã¨ã®ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å¢—ã‚„ã—ã¦ã¿ã¦ãã ã•ã„',
    ],
    medium: [
      'ðŸ“ˆ ç¾åœ¨ã®ä»•äº‹ãƒšãƒ¼ã‚¹ã‚’ç¶­æŒã—ã¤ã¤ã€æ–°ã—ã„ã‚¹ã‚­ãƒ«ç¿’å¾—ã‚’æ¤œè¨Žã—ã¦ã¿ã¦ã¯ï¼Ÿ',
      'ðŸ¤ ãƒãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã‚’æ´»ã‹ã—ã¦ã‚ˆã‚ŠåŠ¹çŽ‡çš„ã«ä½œæ¥­ã‚’é€²ã‚ã¾ã—ã‚‡ã†',
    ],
    high: [
      'ðŸŽ‰ ä»•äº‹ãŒå……å®Ÿã—ã¦ã„ã¾ã™ã­ï¼ã“ã®èª¿å­ã§é ‘å¼µã£ã¦ãã ã•ã„',
      'ðŸ“š å°‚é–€çŸ¥è­˜ã‚’æ·±ã‚ãŸã‚Šã€å¾Œè¼©ã®æŒ‡å°Žã«ãƒãƒ£ãƒ¬ãƒ³ã‚¸ã—ã¦ã¿ã¦ã¯ï¼Ÿ',
    ],
  },
  hobby: {
    low: [
      'ðŸŽ¨ é€±ã«1å›žã€30åˆ†ã ã‘ã§ã‚‚å¥½ããªã“ã¨ã‚’ã™ã‚‹æ™‚é–“ã‚’ä½œã‚Šã¾ã—ã‚‡ã†',
      'ðŸ“– é€šå‹¤æ™‚é–“ã«èª­æ›¸ã‚„éŸ³æ¥½é‘‘è³žã‚’å–ã‚Šå…¥ã‚Œã¦ã¿ã¦ã¯ï¼Ÿ',
      'ðŸŒ± æ–°ã—ã„è¶£å‘³ã«ãƒãƒ£ãƒ¬ãƒ³ã‚¸ã—ã¦ã¿ã‚‹è‰¯ã„æ©Ÿä¼šã§ã™',
      'ðŸ“º å¥½ããªæ˜ ç”»ã‚„ãƒ‰ãƒ©ãƒžã‚’è¦‹ã¦ãƒªãƒ©ãƒƒã‚¯ã‚¹ã™ã‚‹æ™‚é–“ã‚’ä½œã‚Šã¾ã—ã‚‡ã†',
    ],
    medium: [
      'â° è¶£å‘³ã®æ™‚é–“ã‚’ã‚‚ã†å°‘ã—å¢—ã‚„ã›ã‚‹ã‚ˆã†ã€ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’è¦‹ç›´ã—ã¦ã¿ã¾ã—ã‚‡ã†',
      'ðŸ‘­ åŒã˜è¶£å‘³ã‚’æŒã¤ä»²é–“ã¨äº¤æµã—ã¦ã¿ã¦ã¯ã„ã‹ãŒã§ã—ã‚‡ã†ã‹ï¼Ÿ',
    ],
    high: [
      'ðŸŒŸ è¶£å‘³ãŒå……å®Ÿã—ã¦ã„ã¦ç´ æ™´ã‚‰ã—ã„ã§ã™ï¼',
      'ðŸŽ¯ è¶£å‘³ã‚’é€šã˜ã¦æ–°ã—ã„ã‚¹ã‚­ãƒ«ã‚„å‹é”ã‚’å¾—ã‚‰ã‚Œã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“',
    ],
  },
  relationships: {
    low: [
      'ðŸ“± å®¶æ—ã‚„å‹äººã«ç°¡å˜ãªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ã£ã¦ã¿ã¾ã—ã‚‡ã†',
      'â˜• é€±1å›žã€èª°ã‹ã¨ãŠèŒ¶ã‚„ãƒ©ãƒ³ãƒã‚’ã™ã‚‹æ™‚é–“ã‚’ä½œã£ã¦ã¿ã¦ã¯ï¼Ÿ',
      'ðŸŽ å¤§åˆ‡ãªäººã¸ã®å°ã•ãªã‚µãƒ—ãƒ©ã‚¤ã‚ºã‚’è€ƒãˆã¦ã¿ã¾ã—ã‚‡ã†',
      'ðŸ’Œ æ„Ÿè¬ã®æ°—æŒã¡ã‚’è¨€è‘‰ã«ã—ã¦ä¼ãˆã¦ã¿ã¦ãã ã•ã„',
    ],
    medium: [
      'ðŸ—£ï¸ ã‚ˆã‚Šæ·±ã„ä¼šè©±ã‚’ã™ã‚‹æ©Ÿä¼šã‚’å¢—ã‚„ã—ã¦ã¿ã¾ã—ã‚‡ã†',
      'ðŸŽª å‹äººã‚„å®¶æ—ã¨ä¸€ç·’ã«æ–°ã—ã„ä½“é¨“ã‚’ã—ã¦ã¿ã¦ã¯ï¼Ÿ',
    ],
    high: [
      'ðŸ’ äººé–“é–¢ä¿‚ãŒè±Šã‹ã§ç´ æ™´ã‚‰ã—ã„ã§ã™ã­ï¼',
      'ðŸ¤— å‘¨ã‚Šã®äººã¸ã®ã‚µãƒãƒ¼ãƒˆã‚„æ„Ÿè¬ã‚’å¿˜ã‚Œãšã«',
    ],
  },
  learning: {
    low: [
      'ðŸ“± é€šå‹¤æ™‚é–“ã«ãƒãƒƒãƒ‰ã‚­ãƒ£ã‚¹ãƒˆã‚„æ•™è‚²ç³»YouTubeã‚’èžã„ã¦ã¿ã¾ã—ã‚‡ã†',
      'ðŸ“š 1æ—¥10åˆ†ã§ã‚‚èª­æ›¸ã®æ™‚é–“ã‚’ä½œã£ã¦ã¿ã¦ã¯ï¼Ÿ',
      'ðŸ’» ã‚ªãƒ³ãƒ©ã‚¤ãƒ³å­¦ç¿’ã‚µãƒ¼ãƒ“ã‚¹ã§èˆˆå‘³ã®ã‚ã‚‹åˆ†é‡Žã‚’å­¦ã‚“ã§ã¿ã¾ã—ã‚‡ã†',
      'ðŸ“ æ–°ã—ãå­¦ã‚“ã ã“ã¨ã‚’æ—¥è¨˜ã«æ›¸ã„ã¦è¨˜éŒ²ã—ã¦ã¿ã¦ãã ã•ã„',
    ],
    medium: [
      'ðŸŽ“ è³‡æ ¼å–å¾—ã‚„ã‚¹ã‚­ãƒ«ã‚¢ãƒƒãƒ—ã®ãŸã‚ã®è¨ˆç”»ã‚’ç«‹ã¦ã¦ã¿ã¾ã—ã‚‡ã†',
      'ðŸ‘¥ å‹‰å¼·ä¼šã‚„ã‚»ãƒŸãƒŠãƒ¼ã«å‚åŠ ã—ã¦ä»²é–“ã¨å­¦ã³åˆã„ã¾ã›ã‚“ã‹ï¼Ÿ',
    ],
    high: [
      'ðŸŒŸ å­¦ç¿’æ„æ¬²ãŒé«˜ãã¦ç´ æ™´ã‚‰ã—ã„ã§ã™ï¼',
      'ðŸ“– å­¦ã‚“ã ã“ã¨ã‚’å®Ÿè·µã«æ´»ã‹ã—ãŸã‚Šã€ä»–ã®äººã«æ•™ãˆã¦ã¿ã¦ãã ã•ã„',
    ],
  },
};

export function generateAdvice(scores) {
  const advice = [];
  
  Object.entries(scores).forEach(([category, score]) => {
    let level;
    if (score <= 4) level = 'low';
    else if (score <= 7) level = 'medium';
    else level = 'high';
    
    const categoryAdvice = adviceDatabase[category][level];
    const randomAdvice = categoryAdvice[Math.floor(Math.random() * categoryAdvice.length)];
    
    advice.push({
      category,
      score,
      level,
      advice: randomAdvice,
    });
  });
  
  return advice.sort((a, b) => a.score - b.score);
}

export function getOverallBalance(scores) {
  const values = Object.values(scores);
  const average = values.reduce((sum, val) => sum + val, 0) / values.length;
  const variance = values.reduce((sum, val) => sum + Math.pow(val - average, 2), 0) / values.length;
  const standardDeviation = Math.sqrt(variance);
  
  let balanceLevel;
  let balanceMessage;
  
  if (standardDeviation <= 1.5) {
    balanceLevel = 'excellent';
    balanceMessage = 'ðŸŽ¯ ã¨ã¦ã‚‚ãƒãƒ©ãƒ³ã‚¹ã®å–ã‚ŒãŸç”Ÿæ´»ã‚’é€ã£ã¦ã„ã¾ã™ã­ï¼';
  } else if (standardDeviation <= 2.5) {
    balanceLevel = 'good';
    balanceMessage = 'ðŸ‘ æ¦‚ã­ãƒãƒ©ãƒ³ã‚¹ãŒå–ã‚Œã¦ã„ã¾ã™ã€‚å°‘ã—èª¿æ•´ã™ã‚‹ã¨ã‚ˆã‚Šè‰¯ããªã‚Šãã†ã§ã™ã€‚';
  } else {
    balanceLevel = 'needs_improvement';
    balanceMessage = 'âš–ï¸ ç”Ÿæ´»ã®ãƒãƒ©ãƒ³ã‚¹ã‚’è¦‹ç›´ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚ç‰¹ã«ä½Žã„é …ç›®ã«æ³¨ç›®ã—ã¦ãã ã•ã„ã€‚';
  }
  
  return {
    level: balanceLevel,
    message: balanceMessage,
    average: Math.round(average * 10) / 10,
    deviation: Math.round(standardDeviation * 10) / 10,
  };
}